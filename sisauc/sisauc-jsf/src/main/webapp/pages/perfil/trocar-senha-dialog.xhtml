<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  
  <p:dialog header="Atualizar Senha" id="trocar-senha-dialog" widgetVar="trocarSenhaDialog" modal="true" resizable="false">
    <h:form id="trocar-senha-campos-form">
      <h:panelGroup layout="block" rendered="#{param.motivo == 'senhaigual'}" styleClass="alert alert-warning">
        Antes de continuar, é necessário que você troque sua senha!
      </h:panelGroup>
      <p:messages />
      <p:panelGrid>
        <p:row>
          <p:column><p:outputLabel value="Senha atual:" for="senha-atual"/></p:column>
          <p:column>
            <p:password value="#{editarPerfilBean.velhaSenha}" maxlength="64" required="true" id="senha-atual"/>
          </p:column>
        </p:row>
        <p:row>
          <p:column><p:outputLabel value="Nova senha:" for="senha-nova"/></p:column>
          <p:column>
            <p:password value="#{editarPerfilBean.novaSenha}" required="true" id="senha-nova" styleClass="senha"
              feedback="true" weakLabel="Fraco" goodLabel="Razoável" maxlength="64"  onkeypress="isCapslock(event)"
              strongLabel="Forte" promptLabel="Força da senha"/>
              <br/>
							<span class="text-warning capslock-alert" style="display: none;">
							  Caps lock pressionado.
							</span>
					</p:column>
        </p:row>
        <p:row>
          <p:column><p:outputLabel value="Repetir nova senha:" for="repeticao-senha"/></p:column>
          <p:column><p:password value="#{editarPerfilBean.repeticaoNovaSenha}" maxlength="64" required="true" id="repeticao-senha"/></p:column>
        </p:row>
      </p:panelGrid>
      <h:panelGroup styleClass="dialog-footer" layout="block">
        <p:commandButton value="Salvar" styleClass="btn btn-success" id="salvar-senha" icon="fa fa-save" validateClient="true"
          action="#{editarPerfilBean.atualizarSenha}" update="@form"/>
      </h:panelGroup>
    </h:form>
  </p:dialog>
    
</ui:composition>